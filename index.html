<!DOCTYPE HTML>
<html>
    <head>
        <title>W3.CSS Template</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="style.css" type="text/css"/>
        <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/128/3665/3665892.png">

        <style>
            body, h1,h2,h3,h4,h5,h6 {
                font-family: "Montserrat", sans-serif
            }
            .w3-row-padding img {
                margin-bottom: 12px
            }

            .w3-sidebar {
                width: 100px;
                background: #222;
            }
            /* Add a left margin to the "page content" that matches the width of the sidebar (120px) */
            #main {
                margin-left: 100px
            }
            /* Remove margins from "page content" on small screens */
        </style>
    </head>
    <body class="w3-black">

        <!-- Icon Bar (Sidebar - hidden on small screens) -->
        <nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center">
            <!-- Avatar image in top left corner -->
            <a href="#home" class="w3-bar-item w3-button w3-padding-large w3-black">
                <i class="fa fa-home w3-xxlarge"></i>
                <p>GAME</p>
            </a>
            <a href="#rules" class="w3-bar-item w3-button w3-padding-large w3-hover-black">
                <i class="fa fa-user w3-xxlarge"></i>
                <p>RULES</p>
            </a>
            <a href="#Results" class="w3-bar-item w3-button w3-padding-large w3-hover-black">    
                <i class="fa fa-eye w3-xxlarge"></i>
                <p>RESULTS</p>
            </a>

        </nav>


        <!-- Page Content -->
        <div class="w3-padding-small" id="main">

            <header class="w3-container w3-padding-16 w3-center w3-black" id="home">
                <h1 class="w3-jumbo">BURTU SPĒLE</h1>
                <div class="w3-display-container" style="height:100px;">

                </div>
            </header>
            <div class="w3-display-container" style="height:400px;" >
                <div class="w3-display-topmiddle" id="game">
                    <button class="w3-button w3-padding w3-round-xlarge w3-xlarge w3-border w3-border-white w3-round-xlarge w3-ripple "  id="start" onclick="izveliesDaudz()">Sākt spēli</button>
                    <div><label for="vards" id="rakstizvele" style="visibility: collapse;">Izvelies vardu daudzumu </label></div>
                    <div id="izvele"></div>
                    <div id="vards"></div>

                </div>  
                <div class="w3-display-topmiddle">
                    <h1 class="w3-text-white" style="text-shadow:1px 1px 0 #444" id="pulkstens">
                </div>               
                <div class="w3-display-middle">
                    <div class="w3-bar">
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  id="burt1" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  id="burt2" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  id="burt3" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  id="burt8" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  id="burt4" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  id="burt5" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  id="burt6" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  id="burt7" onclick="burts(id, this)"></button>
                    </div>
                </div> 

            </div>

        </div>  
        <!-- About Section -->
        <div class="w3-display-container w3-margin"  style="height:300px;">
            <div class="w3-display-bottomleft w3-margin-left" id="rules">
                <div class="w3-xxlarge" style="text-shadow:1px 1px 0 #444">NOTEIKUMI</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444" >1. Spēlētājs izvēlas cik vārdus minēs 3,4 vai 5.</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444">2. Tiek iedoti 8 burti no kuriem jāveido vārdi.</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444"> 3.Pēc katriem uzminētiem vārdiem nomainas burti un jāmin jauni vārdi.</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444"> 4.Sākot spēli laiks sāk skaitīties uz leju no 30 sekundēm.</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444"> 5. Jo vairāk vārdus veiksmīgi saliek, jo vairāk punkti.</div>
            </div>       
        </div>


    </body>
</html>
<script>
    let burts1 = false;
    let burts2 = false;
    let burts3 = false;
    let burts4 = false;
    let burts5 = false;
    let burtins0 = " ";
    let burtins1 = " ";
    let burtins2 = " ";
    let burtins3 = " ";
    let burtins4 = " ";
    let randomVards = " ";
    let atlase1 = [];
    let l = 0;
    const filePath = 'vardi5.txt';
    let varduDaudzums = 0;
    let varduSkaits = 0;
    let punkti = 0;
    async function readFileToArray(filePath) {
        try {
            const response = await fetch(filePath);
            const data = await response.text();
            const wordsArray = data.split('\n').map(word => word.trim());
            return wordsArray;
        } catch (error) {
            console.error('Error reading file:', error.message);
            return [];
        }
    }
    let vardKopa = [];
    readFileToArray(filePath)
            .then(wordsArray => {
                vardKopa = wordsArray;
                console.log('Array of words (vardKopa):', vardKopa);
            })
            .catch(error => {
                console.error('Error:', error.message);
            });
    function varduDaudz(id) {
        let x = document.getElementById(id).innerHTML.toString();
        console.log(x);

        for (let i = 0; i < 5; i++) {
            let burtivarda = document.createElement("button");

            document.getElementById("vards").appendChild(burtivarda);
            burtivarda.innerHTML = " __ ";
            burtivarda.setAttribute('class', "w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple");
            burtivarda.setAttribute('id', 'burts' + i);
            //burtivarda.setAttribute('onclick','clear(this.id)');
            burtivarda.onclick = () => {
                burtivarda.innerHTML = " __ ";
                let k = document.getElementById(id).innerHTML;

            };
        }

        document.getElementById('izvele').style.visibility = 'collapse';

    }

    function izveliesDaudz() {
        document.getElementById("start").style.visibility = 'collapse';
        let poga3 = document.createElement("button");
        poga3.innerHTML = 3;
        poga3.setAttribute('id', 3);
        poga3.setAttribute('class', "w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple");
        poga3.setAttribute('onclick', 'varduDaudz(this.id), sakt(), izveleBurtu()');
        document.getElementById("izvele").appendChild(poga3);
        document.getElementById("rakstizvele").style.visibility = 'visible';
        varduDaudzums = 3;

        let poga4 = document.createElement("button");
        poga4.innerHTML = 4;
        poga4.setAttribute('id', 4);
        poga4.setAttribute('class', "w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple");
        poga4.setAttribute('onclick', 'varduDaudz(this.id), sakt(), izveleBurtu()');
        document.getElementById("izvele").appendChild(poga4);
        document.getElementById("rakstizvele").style.visibility = 'visible';
        varduDaudzums = 4;

        let poga5 = document.createElement("button");
        poga5.innerHTML = 5;
        poga5.setAttribute('id', 5);
        poga5.setAttribute('class', "w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple");
        poga5.setAttribute('onclick', 'varduDaudz(this.id), sakt(), izveleBurtu()');
        document.getElementById("izvele").appendChild(poga5);
        document.getElementById("rakstizvele").style.visibility = 'visible';
        varduDaudzums = 5;
    }

    var countDownDate, spele;
    function sakt() {
        countDownDate = new Date().getTime();
        spele = setInterval(skaita, 1000);
    }
    function skaita() {
        let now = new Date().getTime();
        let distance = now - countDownDate;
        let seconds = Math.floor((distance % (1000 * 60)) / 1000);
        document.getElementById("pulkstens").innerHTML = seconds + "s ";
        if (distance > 30000) {
            clearInterval(spele);
            document.getElementById("pulkstens").innerHTML = "Beidzās laiks";
        }
    }
    const vowels = ['a', 'e', 'i', 'o', 'u'];
    const consonants = ['b', 'c', 'd', 'f', 'g', 'h', 'j', 'k', 'l', 'm', 'n', 'p', 'q', 'r', 's', 't', 'v', 'w', 'x', 'y', 'z'];
    function izveliesVardus() {
        document.getElementById("burt1").innerHTML = burtins3;
        document.getElementById("burt2").innerHTML = burtins0;
        while (document.getElementById("burt2").innerHTML === document.getElementById("burt1").innerHTML) {
            document.getElementById("burt2").innerHTML = vowels[Math.floor(Math.random() * 5)];
        }
        document.getElementById("burt3").innerHTML = burtins2;
        while (document.getElementById("burt3").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt3").innerHTML === document.getElementById("burt2").innerHTML) {
            document.getElementById("burt3").innerHTML = vowels[Math.floor(Math.random() * 5)];
        }
        document.getElementById("burt4").innerHTML = burtins4;
        while (document.getElementById("burt4").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt4").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt4").innerHTML === document.getElementById("burt3").innerHTML || document.getElementById("burt4").innerHTML === document.getElementById("burt8").innerHTML) {
            document.getElementById("burt4").innerHTML = vowels[Math.floor(Math.random() * 5)];
        }
        document.getElementById("burt5").innerHTML = consonants[Math.floor(Math.random() * 21)];
        while (document.getElementById("burt5").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt5").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt5").innerHTML === document.getElementById("burt3").innerHTML || document.getElementById("burt5").innerHTML === document.getElementById("burt4").innerHTML || document.getElementById("burt5").innerHTML === document.getElementById("burt8").innerHTML) {
            document.getElementById("burt5").innerHTML = consonants[Math.floor(Math.random() * 21)];
        }
        document.getElementById("burt6").innerHTML = consonants[Math.floor(Math.random() * 21)];
        while (document.getElementById("burt6").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt3").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt4").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt8").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt5").innerHTML) {
            document.getElementById("burt6").innerHTML = consonants[Math.floor(Math.random() * 21)];
        }
        document.getElementById("burt7").innerHTML = consonants[Math.floor(Math.random() * 21)];
        while (document.getElementById("burt7").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt3").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt4").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt8").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt5").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt6").innerHTML) {
            document.getElementById("burt7").innerHTML = consonants[Math.floor(Math.random() * 21)];
        }
        document.getElementById("burt8").innerHTML = burtins1;
        while (document.getElementById("burt8").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt8").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt8").innerHTML === document.getElementById("burt3").innerHTML) {
            document.getElementById("burt8").innerHTML = vowels[Math.floor(Math.random() * 5)];
        }
    }

    let x = "";
    let sk = 0;
    function burts(id) {
        if (burts1 === false) {
            document.getElementById('burts0').innerHTML = document.getElementById(id).innerHTML;
            burts1 = true;
        } else {
            if (burts2 === false) {
                document.getElementById('burts1').innerHTML = document.getElementById(id).innerHTML;
                burts2 = true;
            } else {
                if (burts3 === false) {
                    document.getElementById('burts2').innerHTML = document.getElementById(id).innerHTML;
                    burts3 = true;
                } else {
                    if (burts4 === false) {
                        document.getElementById('burts3').innerHTML = document.getElementById(id).innerHTML;
                        burts4 = true;
                    } else {
                        if (burts5 === false) {
                            document.getElementById('burts4').innerHTML = document.getElementById(id).innerHTML;
                            burts5 = true;
                        }
                    }
                }
            }
        }
        const logs0x = document.getElementById('burts0');
        const logs1x = document.getElementById('burts1');
        const logs2x = document.getElementById('burts2');
        const logs3x = document.getElementById('burts3');
        const logs4x = document.getElementById('burts4');
        const logs0 = logs0x.innerHTML;
        const logs1 = logs1x.innerHTML;
        const logs2 = logs2x.innerHTML;
        const logs3 = logs3x.innerHTML;
        const logs4 = logs4x.innerHTML;

        if (logs0 !== " __ " && sk === 0) {
            x = x + logs0;
            sk++;
        }
        if (logs1 !== " __ " && sk === 1) {
            x = x + logs1;
            sk++;
        }
        if (logs2 !== " __ " && sk === 2) {
            x = x + logs2;
            sk++;
        }
        if (logs3 !== " __ " && sk === 3) {
            x = x + logs3;
            sk++;
        }
        if (logs4 !== " __ " && sk === 4) {
            x = x + logs4;
            sk++;
        }
        console.log('Button InnerHTML:', x);
        lodzini = x;
        const existsInArray = doesWordExist(lodzini, vardKopa);
        function doesWordExist(word, wordArray) {
            return wordArray.includes(word);
        }
        if (existsInArray) {
            console.log(`${lodzini} ir`);
            punkti++;
            varduSkaits++;
            burts1 = false;
            burts2 = false;
            burts3 = false;
            burts4 = false;
            burts5 = false;
            sk=0;
            x="";
            lodzini = "";
            if (varduSkaits === varduDaudzums)
                refresh();
        } else {
            console.log(`${lodzini} nav`);
        }
        console.log(punkti);
    }
    function izveleBurtu() {
        while (varduDaudzums > l) {
            while(burtins0 != burtins1 && burtins0 != burtins2 && burtins0 != burtins3 && burtins0 != burtins4 && burtins1 != burtins2 && burtins1 != burtins3 && burtins1 != burtins4 && burtins0 != burtins4)
            randomVards = vardKopa[Math.floor(Math.random() * 5757)];
            burtins0 = randomVards.charAt(0);
            burtins1 = randomVards.charAt(1);
            burtins2 = randomVards.charAt(2);
            burtins3 = randomVards.charAt(3);
            burtins4 = randomVards.charAt(4);

            console.log(randomVards, burtins0, burtins1, burtins2, burtins3, burtins4);
            let resultArray0 = filterWordsByLetter(vardKopa, burtins0);
            let resultArray1 = filterWordsByLetter(resultArray0, burtins1);
            let resultArray2 = filterWordsByLetter(resultArray1, burtins2);
            let resultArray3 = filterWordsByLetter(resultArray2, burtins3);
            let resultArray4 = filterWordsByLetter(resultArray3, burtins4);
            l = resultArray4.length;
            console.log(resultArray4, l, burtins3);
        }
        izveliesVardus();
    }
    function filterWordsByLetter(wordArray, targetLetter) {
        const filteredWords = wordArray.filter(word => {
            return word.includes(targetLetter);
        });

        return filteredWords;
    }
    function refresh() {
        punkti = punkti + varduDaudzums;
        varduDaudzums = 0;
        varduSkaits = 0;
        izveliesDaudz();
    }
</script>
