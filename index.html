<!DOCTYPE HTML>
<html>
    <head>
        <title>W3.CSS Template</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
       
        <link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/128/3665/3665892.png">

        <style>
            body, h1,h2,h3,h4,h5,h6 {
                font-family: "Montserrat", sans-serif
            }
            .w3-row-padding img {
                margin-bottom: 12px
            }

            .w3-sidebar {
                width: 100px;
                background: #222;
            }
            /* Add a left margin to the "page content" that matches the width of the sidebar (120px) */
            #main {
                margin-left: 100px
            }
            /* Remove margins from "page content" on small screens */
        </style>
    </head>
    <body class="w3-black">

        <!-- Icon Bar (Sidebar - hidden on small screens) -->
        <nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center">
            <!-- Avatar image in top left corner -->
            <a href="#home" class="w3-bar-item w3-button w3-padding-large w3-black">
                <i class="fa fa-home w3-xxlarge"></i>
                <p>GAME</p>
            </a>
            <a href="#rules" class="w3-bar-item w3-button w3-padding-large w3-hover-black">
                <i class="fa fa-user w3-xxlarge"></i>
                <p>RULES</p>
            </a>
            <a href="#results" class="w3-bar-item w3-button w3-padding-large w3-hover-black">    
                <i class="fa fa-eye w3-xxlarge"></i>
                <p>RESULTS</p>
            </a>

        </nav>


        <!-- Page Content -->
        <div class="w3-padding-small" id="main">

            <header class="w3-container w3-padding-16 w3-center w3-black" id="home">
                <h1 class="w3-jumbo">BURTU SPĒLE</h1>
                <div class="w3-display-container" style="height:100px;">

                </div>
            </header>
            <div class="w3-display-container" style="height:400px;" >
                <div class="w3-display-topmiddle" id="game">
                    <button class="w3-button w3-padding w3-round-xlarge w3-xlarge w3-border w3-border-white w3-round-xlarge w3-ripple " style="visibility: visible;" id="start" onclick="izveliesDaudz()">Sākt spēli</button>
                    <div><label for="vards" id="rakstizvele" style="visibility: collapse;">Izvelies vardu daudzumu </label></div>
                    <div id="izvele"></div>
                    <div id="vards"></div>

                </div> 
                <div class="w3-display-middleright">
                    <h1 class="w3-text-white" style="text-shadow:1px 1px 0 #444" id="punktini">Punkti:0</h1>
                </div>
                <div class="w3-display-topmiddle">
                    <h1 class="w3-text-white" style="text-shadow:1px 1px 0 #444" id="pulkstens">
                </div>               
                <div class="w3-display-middle">
                    <div class="w3-bar" id="bar" >
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple" style="visibility: collapse;" id="burt1" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple" style="visibility: collapse;" id="burt2" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple" style="visibility: collapse;" id="burt3" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  style="visibility: collapse;" id="burt8" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple" style="visibility: collapse;" id="burt4" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  style="visibility: collapse;" id="burt5" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple" style="visibility: collapse;" id="burt6" onclick="burts(id, this)"></button>
                        <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple"  style="visibility: collapse;" id="burt7" onclick="burts(id, this)"></button>
                    </div>
                </div> 
                <div class="w3-display-bottommiddle">
                    <button class="w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple" style="height:100px; width: 200px"  id="restart" onclick="restart()">NOMAINĪT BURTUS</button>
                </div>
 
            </div>

        </div>
        <div class="w3-display-container w3-margin"  style="height:300px;">
            <div class="w3-display-bottomright" id="rules">
                <div class="w3-xxlarge" style="text-shadow:1px 1px 0 #444">NOTEIKUMI</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444">1.Spēlētājs izvēlas cik vārdus minēs 2,3 vai 4.</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444">2.Tiek iedoti 8 burti no kuriem jāveido vārdi.</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444">3.Ja uzmin izvēlēto daudzumu iedod bonuss punktus, laiku un jaunus burtus.</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444">4.Sākot spēli laiks sāk skaitīties uz leju no 60 sekundēm.</div>
                <div class="w3-xlarge" style="text-shadow:1px 1px 0 #444">5.Jo vairāk vārdus veiksmīgi saliek, jo vairāk punkti.</div>
            </div>       
        </div>
        <div class="w3-display-container" style="height:300px;">
            <div class="w3-display-middle" id="results" style="font-size:140%;">
                <table>
                    <tr>
                        <th>Vards</th>
                        <th>Punkti</th>
                    </tr>
                    <tr>
                        <td>pirmais</td>
                        <td>10</td>
                    </tr>
                    <tr>
                        <td>otrais</td>
                        <td>20</td>
                    </tr>
                </table>
            </div>
        </div>    

    </body>
</html>
<script>
    const burtuArray = [false, false, false, false, false];
    const skArray = [false, false, false, false, false];
    let x = ["", "", "", "", ""];
    const peckartas = [1, 2, 3, 4, 5];
    let burtins0 = " ";
    let burtins1 = " ";
    let burtins2 = " ";
    let burtins3 = " ";
    let burtins4 = " ";
    let randomVards = " ";
    let atlase1 = [];
    let l = 0;
    const filePath = 'vardi5.txt';
    let varduDaudzums = 0;
    let varduSkaits = 0;
    let punkti = 0;


    async function readFileToArray(filePath) {
        try {
            const response = await fetch(filePath);
            const data = await response.text();
            const wordsArray = data.split('\n').map(word => word.trim());
            return wordsArray;
        } catch (error) {
            console.error('Error reading file:', error.message);
            return [];
        }
    }
    let vardKopa = [];
    readFileToArray(filePath)
            .then(wordsArray => {
                vardKopa = wordsArray;
                console.log('Array of words (vardKopa):', vardKopa);
            })
            .catch(error => {
                console.error('Error:', error.message);
            });

    function varduDaudz(id) {
document.getElementById("rakstizvele").style.visibility = 'collapse';   
document.getElementById("burt1").style.visibility = 'visible';
document.getElementById("burt2").style.visibility = 'visible';
document.getElementById("burt3").style.visibility = 'visible';
document.getElementById("burt4").style.visibility = 'visible';
document.getElementById("burt5").style.visibility = 'visible';
document.getElementById("burt6").style.visibility = 'visible';
document.getElementById("burt7").style.visibility = 'visible';
document.getElementById("burt8").style.visibility = 'visible';

        for (let i = 0; i < 5; i++) {
            let burtivarda = document.createElement("button");

            document.getElementById("vards").appendChild(burtivarda);
            burtivarda.innerHTML = " __ ";
            burtivarda.setAttribute('class', "w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple");
            burtivarda.setAttribute('id', 'burts' + i);
            burtivarda.setAttribute('value', peckartas[i]);
            burtivarda.onclick = () => {
                burtivarda.innerHTML = " __ ";
                let k = document.getElementById('burts' + i).id.charAt(5);

                burtuArray[k] = false;
                skArray[k] = false;
            };

            varduDaudzums = parseInt(id);


        }

        document.getElementById('izvele').style.visibility = 'collapse';

    }

    function izveliesDaudz() {
        document.getElementById("start").style.visibility = 'collapse';
        let poga3 = document.createElement("button");
        poga3.innerHTML = 2;
        poga3.setAttribute('id', 2);
        poga3.setAttribute('class', "w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple");
        poga3.setAttribute('onclick', 'varduDaudz(this.id), sakt(), izveleBurtu()');
        document.getElementById("izvele").appendChild(poga3);
         document.getElementById("rakstizvele").style.visibility = 'visible';
        

        let poga4 = document.createElement("button");
        poga4.innerHTML = 3;
        poga4.setAttribute('id', 3);
        poga4.setAttribute('class', "w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple");
        poga4.setAttribute('onclick', 'varduDaudz(this.id), sakt(), izveleBurtu()');
        document.getElementById("izvele").appendChild(poga4);
       

        let poga5 = document.createElement("button");
        poga5.innerHTML = 4;
        poga5.setAttribute('id', 4);
        poga5.setAttribute('class', "w3-button w3-padding w3-white w3-round-xlarge w3-large w3-ripple");
        poga5.setAttribute('onclick', 'varduDaudz(this.id), sakt(), izveleBurtu()');
        document.getElementById("izvele").appendChild(poga5);
        
    }

    var countDownDate, spele;
    function sakt() {
        countDownDate = new Date().getTime() + 10000;
        spele = setInterval(skaita, 1000);
    }
    function skaita() {
        let now = new Date().getTime();
        let distance = countDownDate - now;
        let seconds = Math.floor((distance % (1000 * 60)) / 1000);
        document.getElementById("pulkstens").innerHTML = seconds + "s ";
        if (distance < 0) {
            clearInterval(spele);
            document.getElementById("pulkstens").innerHTML = "Beidzās laiks";
            document.getElementById("burt1").disabled = true;
            document.getElementById("burt2").disabled = true;
            document.getElementById("burt3").disabled = true;
            document.getElementById("burt4").disabled = true;
            document.getElementById("burt5").disabled = true;
            document.getElementById("burt6").disabled = true;
            document.getElementById("burt7").disabled = true;
            document.getElementById("burt8").disabled = true;
            document.getElementById("burts0").disabled = true;
            document.getElementById("burts1").disabled = true;
            document.getElementById("burts2").disabled = true;
            document.getElementById("burts3").disabled = true;
            document.getElementById("burts4").disabled = true;
            location.reload();

        }
    }
    const burtiBiezi = ['a', 'e', 'i', 'o', 'r', 't', 'l', 'n', 's', 'c'];
    function izveliesVardus() {
        document.getElementById("burt1").innerHTML = burtins3;
        document.getElementById("burt2").innerHTML = burtins0;
        while (document.getElementById("burt2").innerHTML === document.getElementById("burt1").innerHTML) {
            document.getElementById("burt2").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        }
        document.getElementById("burt3").innerHTML = burtins2;
        while (document.getElementById("burt3").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt3").innerHTML === document.getElementById("burt2").innerHTML) {
            document.getElementById("burt3").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        }
        document.getElementById("burt8").innerHTML = burtins1;
        while (document.getElementById("burt8").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt8").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt8").innerHTML === document.getElementById("burt3").innerHTML) {
            document.getElementById("burt8").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        }
        document.getElementById("burt4").innerHTML = burtins4;
        while (document.getElementById("burt4").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt4").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt4").innerHTML === document.getElementById("burt3").innerHTML || document.getElementById("burt4").innerHTML === document.getElementById("burt8").innerHTML) {
            document.getElementById("burt4").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        }
        document.getElementById("burt5").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        while (document.getElementById("burt5").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt5").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt5").innerHTML === document.getElementById("burt3").innerHTML || document.getElementById("burt5").innerHTML === document.getElementById("burt4").innerHTML || document.getElementById("burt5").innerHTML === document.getElementById("burt8").innerHTML) {
            document.getElementById("burt5").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        }
        document.getElementById("burt6").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        while (document.getElementById("burt6").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt3").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt4").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt8").innerHTML || document.getElementById("burt6").innerHTML === document.getElementById("burt5").innerHTML) {
            document.getElementById("burt6").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        }
        document.getElementById("burt7").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        while (document.getElementById("burt7").innerHTML === document.getElementById("burt1").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt2").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt3").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt4").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt8").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt5").innerHTML || document.getElementById("burt7").innerHTML === document.getElementById("burt6").innerHTML) {
            document.getElementById("burt7").innerHTML = burtiBiezi[Math.floor(Math.random() * 10)];
        }
    }
    function burts(id) {
        if (burtuArray[0] === false) {
            document.getElementById('burts0').innerHTML = document.getElementById(id).innerHTML;
            burtuArray[0] = true;
        } else {
            if (burtuArray[1] === false) {
                document.getElementById('burts1').innerHTML = document.getElementById(id).innerHTML;
                burtuArray[1] = true;
            } else {
                if (burtuArray[2] === false) {
                    document.getElementById('burts2').innerHTML = document.getElementById(id).innerHTML;
                    burtuArray[2] = true;
                } else {
                    if (burtuArray[3] === false) {
                        document.getElementById('burts3').innerHTML = document.getElementById(id).innerHTML;
                        burtuArray[3] = true;
                    } else {
                        if (burtuArray[4] === false) {
                            document.getElementById('burts4').innerHTML = document.getElementById(id).innerHTML;
                            burtuArray[4] = true;
                        }
                    }
                }
            }
        }
        const logs0 = document.getElementById('burts0').innerHTML;
        const logs1 = document.getElementById('burts1').innerHTML;
        const logs2 = document.getElementById('burts2').innerHTML;
        const logs3 = document.getElementById('burts3').innerHTML;
        const logs4 = document.getElementById('burts4').innerHTML;

        if (logs0 !== " __ " && skArray[0] === false) {
            x[0] = logs0;
            skArray[0] = true;
        }
        if (logs1 !== " __ " && skArray[1] === false) {
            x[1] = logs1;
            skArray[1] = true;
        }
        if (logs2 !== " __ " && skArray[2] === false) {
            x[2] = logs2;
            skArray[2] = true;
        }
        if (logs3 !== " __ " && skArray[3] === false) {
            x[3] = logs3;
            skArray[3] = true;
        }
        if (logs4 !== " __ " && skArray[4] === false) {
            x[4] = logs4;
            skArray[4] = true;
        }
        console.log('Button InnerHTML:', x);
        lodzini = x[0] + x[1] + x[2] + x[3] + x[4];
        const existsInArray = doesWordExist(lodzini, vardKopa);
        function doesWordExist(word, wordArray) {

            return wordArray.includes(word);
        }
        if (existsInArray) {

            console.log(`${lodzini} ir`);
            punkti++;
            varduSkaits++;
            for (let n = 0; n < 5; n++) {
                burtuArray[n] = false;
                skArray[n] = false;
                x[n] = "";
                document.getElementById('burts' + n).innerHTML = " __ ";

            }
            document.getElementById('punktini').innerHTML = 'Punkti:' + punkti;
            lodzini = "";
            console.log(varduSkaits, varduDaudzums);
            if (varduSkaits === varduDaudzums) {
                refresh();
            }
        } else {
            console.log(`${lodzini} nav`);
        }
        console.log(punkti, skArray[1]);
    }
    function izveleBurtu() {
        while (10 > l) {
            randomVards = vardKopa[Math.floor(Math.random() * 5757)];
            burtins0 = randomVards.charAt(0);
            burtins1 = randomVards.charAt(1);
            burtins2 = randomVards.charAt(2);
            burtins3 = randomVards.charAt(3);
            burtins4 = randomVards.charAt(4);
            console.log(randomVards, burtins0, burtins1, burtins2, burtins3, burtins4);
            let resultArray0 = filterWordsByLetter(vardKopa, burtins0);
            let resultArray1 = filterWordsByLetter(resultArray0, burtins1);
            let resultArray2 = filterWordsByLetter(resultArray1, burtins2);
            let resultArray3 = filterWordsByLetter(resultArray2, burtins3);
            let resultArray4 = filterWordsByLetter(resultArray3, burtins4);
            l = resultArray4.length;
            console.log(resultArray4, l);
        }
        izveliesVardus();
    }
    function filterWordsByLetter(wordArray, targetLetter) {
        const filteredWords = wordArray.filter(word => {
            return word.includes(targetLetter);
        });

        return filteredWords;
    }
    function refresh() {
        punkti = punkti + varduDaudzums;
        varduSkaits = 0;
        document.getElementById('punktini').innerHTML = 'Punkti:' + punkti;
        countDownDate = countDownDate + 10000;
    }
    function restart() {
        l = 0;
        varduSkaits = 0;
        console.log(varduSkaits);
        for (let n = 0; n < 5; n++) {
            burtuArray[n] = false;
            skArray[n] = false;
            x[n] = "";

            document.getElementById("burts" + n).innerHTML = "__";

        }
        lodzini = "";
        izveleBurtu();
    }
   
    
</script>
